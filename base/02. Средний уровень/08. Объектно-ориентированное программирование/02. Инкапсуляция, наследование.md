# Инкапсуляция, наследование

Инкапсуляция и наследование это ключевые концепции ООП.

## Инкапсуляция

Инкапсуляция — это принцип ООП, который заключается в скрытие внутренней реализации объекта и предоставлении доступа к
данным только через контролируемый интерфейс (методы). Это помогает защитить данные от некорректного использования и
упрощает управление состоянием объекта.

### Как реализовать инкапсуляция в JavaScript?

JavaScript предлагает несколько способов достижения инкапсуляции:

* Приватные свойства и методы с использованием символа # (c ES2020).
* Соглашения об именовании (например, префикс _ для "приватных свойств").
* Замыкания для скрытия данных (в функциональном стиле).
* Геттеры и сеттеры для контроля доступа к данным.

#### Пример с приватными переменными свойствами (#)

```js
class Person {
    #name;
    #age;

    constructor(name, age) {
        this.#name = name;
        this.#age = age;
    }

    getName() {
        return this.#name;
    }

    setName(name) {
        this.#name = name;
    }

    getAge() {
        return this.#age;
    }

    setAge(age) {
        if (age >= 0) {
            this.#age = age;
        } else {
            console.error("Age must be positive!")
        }
    }
}

const person = new Person("John", 30);

console.log(person.getName()); // John
console.log(person.getAge()); // 30

person.setName("Jane");
person.setAge(31);

console.log(person.#name); // Error: SyntaxError
```

#### Пример с соглашением об именовании (_)

До введения # в JavaScript использовали префикс _ для обозначения "приватных" свойств, хотя они технически не приватные:

```js
class Person {
    constructor(name, age) {
        this._name = name;
        this._age = age;
    }

    getName() {
        return this._name;
    }
}

const person = new Person("John", 25);
console.log(person.getName()); // John
console.log(person._name); // John
```

#### Пример с замыканиями

Замыкания позволяет создавать полностью приватные данные, недоступные извне:

```js
function createPerson(name, age) {
    let privateName = name;
    let privateAge = age;

    return {
        getName() {
            return privateName;
        },
        setName(name) {
            privateName = name;
        },
        getAge: () => privateAge,
        setAge: (age) => privateAge = age
    }
}

const person = createPerson("John", 25);

console.log(person.getName()); // John
console.log(person.getAge()); // 25
```

### Особенности инкапсуляции в JavaScript

* Приватные поля (#)
    * Настоящая приватность, введена в ES2020
    * Поля с # недоступные извне класса, даже через наследование
    * Пример: #field можно использовать только внутри класса, где оно объявлено
* Геттеры и сеттеры
    * Позволяют контролировать доступ и изменение данных
    * Объявляются с ключевыми словами get и set

```js
class Person {
    #name;

    constructor(name) {
        this.#name = name;
    }

    get name() {
        return this.#name;
    }

    set name(name) {
        this.#name = name.toUpperCase();
    }
}

const person = new Person("John");
console.log(person.name); // JOHN
person.name = "Jane";
console.log(person.name); // JANE
```

* Соглашения
    * Прификс _ — это просто договоренность, не обеспечивающая настоящей приватности.
* Практическое применение
    * Защита данных от случайного изменения
    * Создания публичного интерфейса для взаимодействия с объектом
    * Сокрытия сложной внутреннй логики

## Наследование

