# Классы (class, extends, super)

Классы в JavaScript, введенные в ECMAScript2015 (ES6), предоставляют удобный синтаксис для работы с
объектно-ориентированным программированием (ООП), основанным на прототипном наследовании.

## Классы (class)

Классы в JavaScript — это "синтаксический сахар" над прототипным наследованием. Они позволяют создавать шаблоны для
объектов с помощью конструктора, методов и свойств.

### Синтаксис

```js
class ClassName {
    constructor(params) {
        // Initialization property
    }

    methodName() {
        // Method logic
    }
}
```

* **class:** Объявляет класс.
* **constructor:** Специальный метод, вызываемый при создании экземпляра класса с помощью `new`. Используется для
  инициализации свойств.
* Методы класса автоматически добавляются в прототип объекта.

```js
class Person {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }

    greet() {
        console.log(`Hello, my name is ${this.name}!`);
    }
}

const john = new Person("John", 30);
john.greet();
```

### Особенности

* Классы не поддерживают hoisting (поднятие), в отличие от функций. Их нужно объявить до использования.
* Методы в классе автоматически работают в "use strict" режиме.
* Классы могут содержать статические методы (с ключевым словом static), которые вызываются на самом классе, а не на
  экземплярах:

```js
class Person {
    static describe() {
        console.log("This class for describe people");
    }
}

Person.describe(); // This class for describe people
```

## Наследование (extends)

Ключевое слово extends используется для создания подкласса (дочернего класса), который наследует свойства и методы
родительского класса.

### Синтаксис

```js
class ChildClass extends ParentClass {
    constructor(params) {
        super(params); // Call parent constructor
        // Initialization property
    }
}
```

* **extends:** Указывает, что класс наследуется от другого класса.
* Наследуемый класс получает доступ ко всем методам и свойствам родительского класса через прототип.

```js
class Person {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }

    greet() {
        console.log(`Hello, my name is ${this.name}!`);
    }
}

class Student extends Person {
    constructor(name, age, group) {
        super(name, age);
        this.group = group;
    }

    study() {
        console.log(`${this.name} studying in ${this.group}!`);
    }
}

const student = new Student("John", 30, "Web Developer");
```

### Особенности

* Без extends класс не наследуется от другого класса, но все классы по умолчанию наследуют от Object.
* Можно переопределить методы родительского класса в дочернем.

```js
class Student extends Person {
    constructor(name, age, group) {
        super(name, age);
        this.group = group;
    }

    greet() {
        console.log(`Hello, my name is ${this.name}! I studying in ${this.group}!}`);
    }
}
```

## Ключевое слово super

Ключевое слово super используется в классах для:

1. Вызова конструктора родительского класса.
2. Вызова методов родительского класса.

### Синтаксис

* В конструкторе: `super(params)` — вызывается конструктор родителя.
* В методах: `super.methodName()` — вызывается метод родителя.

```js
class Person {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }

    greet() {
        console.log(`Hello, my name is ${this.name}!`)
    }
}

class Student extends Person {
    constructor(name, age, group) {
        super(name, age); // call parent constructor
        this.group = group;
    }

    greet() {
        super.greet(); // call parent methods
        console.log(`I studying in ${this.group}!`);
    }
}

const student = new Student("John", 30, "Web Developer");
student.greet();
```

### Особенности

* В конструкторе дочернего класса обязательно вызывать super() перед использованием this, иначе будет ошибка
  ReferenceError.
* super можно использовать только в классах, объявленных с class, и только в конструкторе или методах.
* Если родительский класс не имеет конструктора, super() все равно можно вызвать — он вызовет пустой конструктор.

## Полезные замечания

### Прототипное наследование

* Классы в JavaScript — это не настоящие классы, как в языках типа Java, а синтаксический сахар над прототипами.
* extends устанавливает связь через `[[Prototype]]`, а `super` обращается к методам прототипа родителя.

### Геттеры и сеттеры

Классы поддерживают геттеры и сеттеры для управления доступом к свойствам.

```js
class Person {
    constructor(name, age) {
        this._name = name;
        this._age = age;
    }

    get name() {
        return this._name;
    }

    set name(value) {
        this._name = value;
    }

    get age() {
        return this._age;
    }

    set age(value) {
        this._age = value;
    }
}

const person = new Person("John");
console.log(person.name); // John
person.name = "Antony";
console.loh.log(person.name); // Antony
```

### Статические свойства и методы

* Статические методы вызываются на классе, а не на экземплярах.
* Статические свойства (с ES2022) объявляются с static.

```js
class Person {
    static species = "Homo sapiens";

    static getSpecies() {
        return Person.species;
    }
}

console.log(Person.getSpecies()); // Homo Sapiens
```

### Ошибки

* Попытка вызвать this до super() в конструкторе дочернего класса вызовет ошибку.
* Классы нельзя вызывать без new (например, Person() вместо new Person() выдаст TypeError).