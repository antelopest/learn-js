# Замыкания (closures)

Замыкание (Closure) в JavaScript — это мощный и важный концепт, который позволяет функции "запоминать" окружение, в
котором она была создана, даже после того, как это окружение перестает существовать.

## Что такое замыкание?

Замыкание — это функция, которая имеет доступ к переменной из своей внешней (родительской) области видимости, даже после
того, как внешняя функция завершила свое выполнение. Это возможно благодаря тому, что функция сохраняет ссылку на
лексическое окружение (Lexical Environment), в котором она была определена.

Ключевые моменты:

* Замыкание создается, когда внутренняя функция ссылается на переменные из внешней функции.
* Лексическое окружение — это объект, содержащий все переменные, доступные функции в момент ее создания.
* Замыкания позволяют сохранять состояние и создавать "приватные" данные.

## Как работает замыкание?

### Пример Простое замыкание

```js
function createCounter() {
    let count = 0;

    function increment() {
        count++;
        console.log(count);
    }

    increment.resetCount = function () {
        count = 0;
    }

    return increment;
}

const counter = createCounter();

counter(); // 1
counter(); // 2
counter(); // 3

counter.resetCount();

counter(); // 0
```

#### Что происходит?

* Функция `createCounter` создает переменную `count` и внутреннюю функцию `increment`.
* `increment` использует count, создавая замыкание.
* Когда `createCounter` возвращает `increment`, переменная count сохраняется в памяти, и каждый вызов counter()
  увеличивает
  ее значение.
* Использовав функцию `resetCount`, можно сбросить значение переменной.

**Важно:** Каждый вызов `createCounter` создает новое лексическое окружение, поэтому можно создать несколько независимых
счетчиков.

```js
const counter1 = createCounter();
const counter2 = createCounter();

counter1(); // 1
counter2(); // 1
counter1(); // 2
counter2(); // 2
```