# Модули: ESM, CommonJS

## ESM (ECMAScript Modules)

> Современный стандарт модулей, используется в браузерах и современных сборщиках (Vite, Webpack, Rollup).

### Особенности:

* Поддерживается нативно в браузерах (если указать `type="module"` в `<script>`).
* Поддерживает асинхронную загрузку (можно использовать import() динамически).
* Работает только в строгом режиме (strict mode).
* Использует import и export.

#### Пример

```js
// utils.js
export const sum = (a, b) => a + b;
export default function hello() {
    console.log('Hello!');
}
```

```js
// main.js
import hello, {sum} from './utils.js';

hello(); // Hello!
console.log(sum(2, 3)); // 5
```

## CommonJS (CJS)

> Старый стандарт модулей, использовался в Node.js по умолчанию до недавнего времени.

### Особенности:

* Синхронная загрузка модулей (подходит только для серверной среды).
* Использует `require()` и `module.exports`.
* Работает вне браузера (Node.js, особенно версии до 13).

#### Пример

```js
// utils.js
function sum(a, b) {
    return a + b;
}

module.exports = {
    sum
};
```

```js
// main.js
const {sum} = require('./utils');

console.log(sum(2, 3)); // 5
```

## Отличия в кратком виде:

| Характеристика        | ESM                        | CommonJS                        |
|-----------------------|----------------------------|---------------------------------|
| Синтаксис             | `import` / `export`        | `require()` / `module.exports`  |
| Поддержка в браузерах | Да                         | Нет                             |
| Асинхронность         | Поддерживается             | Синхронно                       |
| Используется где?     | Frontend и Node.js (новый) | Node.js (старый)                |
| Динамический импорт   | `import()`                 | Сложнее реализовать             |
| Совместимость         | Современный стандарт       | Устаревающий, но поддерживается |

## Примечание

Сейчас Node.js поддерживает ESM, если:

* Файл имеет расширение `.mjs`

или

* В `package.json` указано `"type": module`

